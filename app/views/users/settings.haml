:ruby
	current_user.country = 'IN' if current_user.country.blank?
	current_user.state = 'Karnataka' if current_user.state.blank?
= form_for(current_user, :url => "/users/update", :html => { :method => :post, :multipart => true }) do |f|
	- render_flash
	.panel.panel-default
		.panel-heading
			%h3.panel-title Account Details
		.panel-body
			.form-horizontal
				.row.form-group
					%label.col-sm-2.control-label Email
					.col-sm-10
						%p.form-control-static
							= current_user.email
				.row.form-group
					%label.col-sm-2.control-label Mobile *
					.col-sm-10
						= f.text_field :phone, :class => 'form-control', placeholder: '10 digit mobile no. (India only)'
						.error
							= errortxt(current_user.errors[:phone].uniq.join(', '))
				.row.form-group
					%label.col-sm-2.control-label Password
					.col-sm-10
						%p.form-control-static
							%a{:href => edit_user_registration_path} Change Password 
		.panel-heading
			%h3.panel-title Personal Details
		.panel-body
			.form-horizontal
				.row.form-group
					%label.col-sm-2.control-label Name *
					.col-sm-10
						= f.text_field :name, :class => 'form-control'
						.error
							= errortxt(current_user.errors[:name].uniq.join(', '))
				.row.form-group
					%label.col-sm-2.control-label Date of Birth *
					.col-sm-10
						- if current_user.dob.blank?
							= f.text_field :dob, :class => 'form-control dob', placeholder: 'dd/mm/yyyy (min 23 years)'
						- else
							= f.text_field :dob, :value => current_user.dob.strftime("%d/%m/%Y"), :class => 'form-control dob', placeholder: 'dd/mm/yyyy (min 23 years)'
						.error
							= errortxt(current_user.errors[:dob].uniq.join(', '))
				.row.form-group
					%label.col-sm-2.control-label Gender
					.col-sm-10
						= f.select :gender, [['Male', 0], ['Female', 1]], {}, :class => 'form-control'
		.panel-heading
			%h3.panel-title Location Details
		.panel-body
			.form-horizontal
				.row
					.col-sm-2
					.col-sm-10
						.help-block.f-b
							Please share your current address for optimized experience
				.row.form-group
					%label.col-sm-2.control-label Country
					.col-sm-10
						= f.select :country, Country.all, {}, :class => 'form-control bind-country'
				:ruby
					if current_user.country == 'IN'
						cls = ''
					else
						cls = 'hide'
					end
				%div{:class => cls + " bind-to-country"}
					.row.form-group
						%label.col-sm-2.control-label State
						.col-sm-10
							= f.select :state, CommonHelper::STATE, {}, :class => 'form-control'
					.row.form-group
						%label.col-sm-2.control-label City
						.col-sm-10
							= f.text_field :city, :class => 'form-control'
					.row.form-group
						%label.col-sm-2.control-label Pincode
						.col-sm-10
							= f.text_field :pincode, :class => 'form-control', placeholder: '6 digit current pincode'
							.error
								= errortxt(current_user.errors[:pincode].uniq.join(', '))
		.panel-heading
			%h3.panel-title License Details
		.panel-body
			.form-horizontal
				.row
					.col-sm-2
					.col-sm-10
						.help-block
							Zoom will manually check the validity of your license. 
							.p-t5.f-b
								%i Any discrepancy will lead to immediate cancellation and blocking of account.
				.row.form-group
					%label.col-sm-2.control-label License Number
					.col-sm-10
						= f.text_field :license, :class => 'form-control'
						.error
							= errortxt(current_user.errors[:license].uniq.join(', '))
				.row.form-group
					%label.col-sm-2.control-label License Image
					.col-sm-5
						%input{type: "file", name: "image[avatar]", accept: "image/*"}
						- if @image
							.error
								- if @image.errors[:avatar_content_type].length > 0
									= errortxt('is invalid, allow formats are jpg, jpeg, gif and png.')
								- else
									= errortxt('is invalid, maximum allowed file size is 2 MB.')
						.help-block
							maximum file size is 2 MB
							%br/
							allowed format : jpg, jpeg, gif, png
						%br/
						= submit_tag "Submit", :class => 'btn btn-default btn-lg'
					.col-sm-5
						- license = current_user.license_pic
						- if licence
							%a{href: license.avatar.url(:profile), target: '_blank'}
								= image_tag license.avatar.url(:thumb)
