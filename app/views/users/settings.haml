:ruby
	current_user.country = 'IN' if current_user.country.blank?
	current_user.state = 'Karnataka' if current_user.state.blank?
= form_for(current_user, :url => "/users/update", :html => {:method => :post}) do |f|
	- render_flash
	.panel.panel-default
		.panel-heading
			%h3.panel-title Account Details
		.panel-body
			.form-horizontal
				.row.form-group
					%label.col-sm-2.control-label Email
					.col-sm-10
						%p.form-control-static
							= current_user.email
				.row.form-group
					%label.col-sm-2.control-label Mobile *
					.col-sm-10
						= f.text_field :phone, :class => 'form-control', placeholder: '10 digit mobile no. (India only)'
						.error
							= errortxt(current_user.errors[:phone].uniq.join(', '))
				.row.form-group
					%label.col-sm-2.control-label Password
					.col-sm-10
						%p.form-control-static
							%a{:href => edit_user_registration_path} Change Password 
		.panel-heading
			%h3.panel-title Personal Details
		.panel-body
			.form-horizontal
				.row.form-group
					%label.col-sm-2.control-label Name *
					.col-sm-10
						= f.text_field :name, :class => 'form-control'
						.error
							= errortxt(current_user.errors[:name].uniq.join(', '))
				.row.form-group
					%label.col-sm-2.control-label Date of Birth *
					.col-sm-10
						- if current_user.dob.blank?
							= f.text_field :dob, :class => 'form-control dob', placeholder: "dd/mm/yyyy (min #{CommonHelper::MIN_AGE} years)"
						- elsif [2,3].include?(current_user.license_status) || current_user.status == 1 || current_user.is_underage?
							= f.text_field :dob, :value => current_user.dob.strftime("%d/%m/%Y"), :class => 'form-control dob', placeholder: "dd/mm/yyyy (min #{CommonHelper::MIN_AGE} years)", disabled: ""
						- else
							= f.text_field :dob, :value => current_user.dob.strftime("%d/%m/%Y"), :class => 'form-control dob', placeholder: "dd/mm/yyyy (min #{CommonHelper::MIN_AGE} years)"
						.error
							= errortxt(current_user.errors[:dob].uniq.join(', '))
				.row.form-group
					%label.col-sm-2.control-label Gender
					.col-sm-10
						= f.select :gender, [['Male', false], ['Female', true]], {}, :class => 'form-control'
		.panel-heading
			%h3.panel-title Location Details
		.panel-body
			.form-horizontal
				.row
					.col-sm-2
					.col-sm-10
						.help-block.f-b
							Please share your current address for optimized experience
				.row.form-group
					%label.col-sm-2.control-label Country
					.col-sm-10
						= f.select :country, Country.all, {}, :class => 'form-control bind-country'
				:ruby
					if current_user.country == 'IN'
						cls = ''
					else
						cls = 'hide'
					end
				%div{:class => cls + " bind-to-country"}
					.row.form-group
						%label.col-sm-2.control-label State
						.col-sm-10
							= f.select :state, CommonHelper::STATE, {}, :class => 'form-control'
					.row.form-group
						%label.col-sm-2.control-label City
						.col-sm-10
							= f.text_field :city, :class => 'form-control'
					.row.form-group
						%label.col-sm-2.control-label Pincode
						.col-sm-10
							= f.text_field :pincode, :class => 'form-control', placeholder: '6 digit current pincode'
							.error
								= errortxt(current_user.errors[:pincode].uniq.join(', '))
							%br/
							= submit_tag "Update", :class => 'btn btn-default btn-lg'
