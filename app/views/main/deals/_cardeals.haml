:ruby
	b = Booking.new
	b.starts = starts
	b.ends = ends
	b.location_id = location.id
	b.cargroup_id = cargroup.id
	b.city_id = @city.id
	b.valid?
	fare = b.get_fare
	disc = fare[:total] - fare[:total]*discount/100
.col-md-6.pull-left
	- if sold_out
		.sold-out-tag
	.each-car-offer.r-3
		.col-md-4.border-r-c
			= image_tag("cars/#{cargroup.id}small.jpg", :alt => "")
			.fl.p-t5.p-b10
				.size-20.f-b.zoom-b
					= cargroup.shortname
					/ Scorpio LX
				.size-14.m-t5.lgrey
					= cargroup.seating.to_s + " Seater"
					/ 7 Seater
					%form{:action => "/#{@city.name.downcase}/bookings/do_flash_booking", :id => "CheckoutForm"}
						.hide
							%input{name: "deal", type: "hidden", value: "#{deal}"}
						.m-t10.btn-book
							%input.button{type: "submit", value: "Book", :class => ("button-dis" if sold_out), :disabled => sold_out}
		.col-md-8.border-b-c.p-0
			.col-md-6
				.text-up.size-12.p-b2.p-t5.t-c.light-grey
					Pickup Time
			.col-md-6.border-l-c
				.text-up.size-12.p-b2.p-t5.t-c.light-grey
					Dropoff Time
		.col-md-8.border-b-c.p-0
			.col-md-6.p-l0.p-r0
				.text-up.size-14.p-b10.p-t10.t-c
					.fo-helv.f-b
						= starts.strftime("%d %b, %Y")
						/ 30 Dec, 2014
						%br 
							= starts.strftime('%I:%M %P')
							/ 11:30 PM
			.col-md-6.border-l-c.p-l0.p-r0
				.text-up.size-14.p-b10.p-t10.t-c
					.fo-helv.f-b
						= ends.strftime("%d %b, %Y")
						/ 04 Jan, 2015 
						%br 
							= ends.strftime('%I:%M %P')
							/ 11:30 PM
		.col-md-8.border-b-c.p-0.p-l35.location_icon
			.size-13.p-b5.p-t5.light-grey
				%span.text-up
					Pickup location
				.zoom-b.f-b.size-12.m-t5
					= location.name
					%span.size-11.help.pointer{:title => ""}
						(view map)
		.col-md-8.p-0
			.col-md-6
				%h4.t-c.size-22.m-t12.strike-text Rs. #{fare[:total]}
			.col-md-6
				%h4.t-c.fo-helv.f-b.size-26.m-t10.red Rs. #{disc}
